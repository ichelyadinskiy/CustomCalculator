<!DOCTYPE html>
<html>
<head>
    <title>Calculator</title>
    <script type="text/javascript" src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="~/Scripts/underscore.min.js"></script>
    <script type="text/javascript" src="~/Scripts/Custom/controller.js"></script>
    <script type="text/javascript" src="~/Scripts/Custom/model.js"></script>
    <script type="text/javascript" src="~/Scripts/Custom/observer.js"></script>
</head>
<body>
    <div id="calculatorContainer"></div>
</body>
<script type="text/javascript">
    $(document).ready(function () {
        observer.on(controller, "modelChange", "render");
        controller.run();
    })
</script>
<script id="calculatorTemplate" type="text/template">
    <div class="calculator">
        <div class="display">
            <div>Memory: <%=model.digits.memory%></div>
            <div>Result: <%=model.digits.result%></div>
            <div>
                <input type="text" value="<%=model.digits.current%>" readonly/>
            </div>
        </div>
        <div class="calc">
            <div>
                <%for(var i=7;i<10;i++) {%>
                                   <button onclick="javascript: observer.trigger('digitClicked', this)" class="digit"><%=i%></button>
                    <%}%>
            </div>
            <div>
                <%for(var i=4;i<7;i++) {%>
                                   <button onclick="javascript: observer.trigger('digitClicked', this)" class="digit"><%=i%></button>
                    <%}%>
            </div>
            <div>
                <%for(var i=1;i<4;i++) {%>
                       <button onclick="javascript: observer.trigger('digitClicked', this)" class="digit"><%=i%></button>
                    <%}%>
            </div>
            <div>
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">+</button>
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">-</button>
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">*</button>
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">/</button>
                <br />
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">MS</button>
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">MR</button>
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">M+</button>
                <br />
                <button onclick="javascript: observer.trigger('operatorClicked', this)" class="operator">C</button>
            </div>
        </div>
    </div>
</script>
</html>